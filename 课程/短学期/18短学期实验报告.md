## 系统模块说明

### 1. 系统结构设计

1.1 关系图

![1](F:\Pictures\ScreenShots\1.png)

1.2 表清单

| 名称     | 代码             | 备注     |
| -------- | ---------------- | -------- |
| 材料品牌 | Material_Brand   | 材料品牌 |
| 材料类别 | Material_Class   | 材料类别 |
| 服务     | Services         | 服务     |
| 材料     | Materials        | 材料     |
| 服务订单 | Service_Orders   | 服务订单 |
| 材料订单 | Material_Orders  | 材料订单 |
| 材料预算 | Material_Budgets | 材料预算 |
| 服务预算 | Service_Budgets  | 服务预算 |
| 客户     | Customers        | 客户     |
| 系统用户 | Staffs           | 系统用户 |

------



### 2. 系统流程图

![HomeBudgetSystem](E:\OneDrive - business\Draw.io\HomeBudgetSystem.png)



### 3. 项目目录结构

1. `model` : 定义与数据库表结构对应的 java 实体类
2. `control`: 操作数据库的文件
3. `property`: 存放用于在 javafx 界面上显示的数据类型的中间类
4. `ui`: 界面的布局定义和控制类
5. `util`: 用于数据转换，显示对话框等的工具类
6. `Starter.java`: 程序启动入口



### 4. 依赖模块

前端组件库：

1. `JavaFX`( Oracle 开发的 Java UI 平台 )

2. `jfoenix` ( Android 5.0 风格的 JavaFX 控件)

3. `controlsfx` (对话框显示)

后端依赖模块：

1. `Hibernate` (对象关系映射框架)



### 5. 主要功能

#### 5.1 功能概述

1. 管理员
   - 查看，添加，修改，删除材料
   - 查看，添加，修改，删除服务
   - 查看，添加，修改，删除用户
   - 查看，添加，修改，删除用户订单

2. 用户管理

   - 查看已有材料和服务
   - 查看，添加，修改，删除订单
   - 修改密码

   - 根据用户订单生成预算报表



#### 5.2 实现细节

1. 设置实体编号( id ) 为native，在添加记录时自动生成以方便操作
2. 用户和材料，服务之间为一对多的关系，即一个用户可以有多个订单，一个订单下可以有多个服务或材料，采用订单表和订单详情表实现
3. 外键的限制在代码中实现，如删除一个品牌时遍历是否在该品牌下已有对应的材料，不允许删除含外键被引用的对象
4. 客户在购买对应的材料和服务后，根据对应材料与服务的单价和数量计算出该客户所有订单总预算
5. 采用 javaFX 编写界面，实现方式类似 Android，使用 xml 文件编写布局，java 编写 Controller 控制类进行控制, 一个舞台( Stage )下可以有多个场景 (Sence)，从 start 到 stop 为一个 Stage 的生命周期
6. 界面显示时需要用到 javaFX 的封装类，如 IntergerProperty, String Property



### 6. 缺点与不足

1. 服务和材料之间没有建立关系表，两者是分离的。

   实验的要求是希望用户购买时同时选择对应的材料和服务，生成一个完整的解决方案

2. 生成订单时不是用下拉选择框的方式，而是需要填写对应材料或服务的编号，对用户而言非常不便

3. 界面粗糙，操作不便



## 二. 个人总结

为期十四天的短学期，对主外键关系约束和 Java 数据库操作有了更多的经验。刚开始对客户和产品之间的关系仅限于一对一的理解，导致后面修改了多次表结构。对实验的理解也有一些出入，导致最后做出来的订单在服务与材料之间没有关系，不符合实验要求。由于觉得 Windows 上的 Swing 的界面比较丑，所以使用了 JavaFX 框架，但使用 JavaFX 上手时不是很顺利，看了许多教程后才实现了多个页面的切换，并且代码的耦合度很高，很少用到封装，阅读性很差，最后界面也没能实现自己想要的 Material Design 比较遗憾…

未来在做项目时不能直接上手就码代码，应该在学习理解了一定教程后，再基于简单的 demo 一点点实现，防止未来多次返工。 还有要理解需求，防止开始就跑偏…



## 三. 实习概况

![Snipaste_2018-09-14_15-34-48](E:\OneDrive - business\ZUCC课程\短学期\Snipaste_2018-09-14_15-34-48.png)